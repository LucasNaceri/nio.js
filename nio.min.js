var htmlTemplates=htmlTemplates||{};htmlTemplates["tiles/tiles.html"]='<header class=tile-header>\n	<a class=tile-author>\n		<% if (profile_image_url) { %>\n			<img class=tile-author-avatar src="<%=profile_image_url%>" alt="<%=name%>\'s avatar">\n		<% } %>\n		<strong class=tile-author-name><%=name%></strong>\n	</a>\n	<span class=tile-actions>\n		<span class="icon icon-<%=type%>"></span>\n	</span>\n</header>\n<div class=tile-content>\n	<% if (media_url) { %>\n		<img class=tile-media src="<%=media_url%>" alt="<%=text%>" title="<%=text%>">\n	<% } else { %>\n		<%=linkify(text)%>\n	<% } %>\n</div>\n<footer class=tile-footer>\n	<p class="tile-share float-left">\n		<a href=#>\n			<span class="icon icon-mini icon-twitter"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-facebook"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-pinterest"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-envelope"></span>\n		</a>\n	<p class=float-right>\n		<time is=relative-time datetime="<%=time%>">\n			<%=time%>\n		</time>\n		<!--<a target=_blank href="<%=link%>">view post</a>-->\n</footer>\n',function t(n,e,i){function s(o,a){if(!e[o]){if(!n[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var h=e[o]={exports:{}};n[o][0].call(h.exports,function(t){var e=n[o][1][t];return s(e?e:t)},h,h.exports,t,n,e,i)}return e[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(t,n){function e(){}n.exports.EventEmitter=e,e.prototype.on=function(t,n){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(n)},e.prototype.off=function(t,n){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(n),1)},e.prototype.emit=function(t){if(this._events=this._events||{},t in this._events!=!1)for(var n=0;n<this._events[t].length;n++)this._events[t][n].apply(this,Array.prototype.slice.call(arguments,1))}},{}],2:[function(t,n){function e(t,n){return this instanceof e?(l.call(this),this.host=t,this.pollRate=n||3e4,this.interval=null,void(this.path=null)):new e(t,n)}function i(t){function n(s){return e=io.connect(t,{"force new connection":!0}),i=e.socket,i.on("connect",function(){e.emit("ready","posts"==s?"default":path)}),i.on("connect_failed",function(){console.error("connection failed")}),i.on("error",function(){console.error("connection error")}),e.on("recvData",function(t){n.push(s,JSON.parse(t))}),this}var e=null,i=null;return n.host=function(n){return arguments.length?(t=n,this):t},n.stop=function(){e&&e.disconnect()},_.assign(n,l.prototype)}function s(){function t(e){return n.forEach(function(n){n.on("data",function(n){t.push(n)}),n(e)}),this}var n=[];return t.source=function(t){return n.push(t),this},t.stop=function(){return n.forEach(function(t){t.stop()}),this},_.assign(t,l.prototype)}function r(){console.log(this),setInterval(function(){this.push("hello world")}.bind(this),1e3)}function o(){return l.make(function(t){console.log(t),this.push(t)})}function a(t){return this instanceof a?(l.call(this),this.modelFn=t,this.data=[],this.transforms=[],void(this.transformFn=null)):new a(t)}var l=t("./stream"),h=t("./util");h.inherits(e,l),e.prototype._poll=function(){var t=this.path;return d3.json(this.host+"/"+t,function(n,e){var i=e[t];if(i&&_.isArray(i))for(var s=i.length;s--;)this.push(i[s]);else this.push(i)}.bind(this)),this},e.prototype.get=function(t){return this.stop(),this.path=t,this._poll(),this.interval=setInterval(this._poll.bind(this),this.pollRate),this},e.prototype.stop=function(){return this.interval&&clearInterval(this.interval),this},h.inherits(r,l),h.inherits(a,l),a.prototype.write=function(t){var n=new this.modelFn(t);_.any(this.data,function(t){return n.getID()==t.getID()})||(this.data.push(n),this.transformFn&&(this.data=this.transformFn(this.data)),this.push(this.data))},a.prototype.transform=function(t){return this.transforms.push(t),this.transformFn=this.transforms[0],this},a.prototype.sort=function(t,n){return this.transform(function(e){var i=_.sortBy(e,function(n){return n[t]});return n?i.reverse():i}),this},n.exports=window.nio={json:e,socketio:i,mux:s,models:t("./models"),tiles:t("./tiles/tiles.js"),collection:a,utils:{logStream:o}}},{"./models":3,"./stream":4,"./tiles/tiles.js":5,"./util":6}],3:[function(t,n){function e(t){_.assign(this,e.defaults,t)}e.prototype.getID=function(){return this.id},e.defaults={profile_image_url:null,media_url:null},n.exports={Post:e}},{}],4:[function(t,n){function e(){i.call(this)}n.exports=e;var i=t("./events").EventEmitter,s=t("./util");s.inherits(e,i),e.prototype.push=function(t){this.emit("data",t)},e.prototype.write=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(t){return this.on("data",t.write.bind(t)),t},e.make=function(t){var n=new e;return n.write=t.bind(n),n}},{"./events":1,"./util":6}],5:[function(t,n){function e(t){return t=t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target=_blank href='$1'>$1</a>"),t=t.replace(/(^|\s)@(\w+)/g,'$1<a target=_blank href="http://twitter.com/$2">@$2</a>'),t.replace(/(^|\s)#(\w+)/g,'$1<a target=_blank href="http://twitter.com/search?q=%23$2">#$2</a>')}function i(t){return this instanceof i?(this.el=d3.select(t),this.posts=[],void(this.lazyUpdate=_.debounce(this.update.bind(this),1e3))):new i(t)}var s=t("../stream"),r=t("../util"),o=_.template(htmlTemplates["tiles/tiles.html"],null,{imports:{linkify:e}});r.inherits(i,s),i.prototype.update=function(){var t=this.el.selectAll("div").data(this.posts);return t.enter().append("div"),t.attr("class",function(t){return"tile tile-"+t.type+(t.media_url?" tile-has-media":"")}).html(function(t){return o(t)}),t.exit(),this},i.prototype.write=function(t){this.posts=t,this.lazyUpdate(),this.push(t)},n.exports=i},{"../stream":4,"../util":6}],6:[function(t,n){n.exports.inherits=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}},{}]},{},[2]);