<!doctype html>
<meta charset=utf-8>
<title>nio.js examples</title>

<link rel=stylesheet href=nio.min.css></script>
<style>
	* {
		margin: 0;
		padding: 0;
	}
	h1 {
		background: #ccc;
		text-align: center;
	}
	#tiles {
		margin: 0 auto;
		padding: 20px;
		width: 906px;
	}
</style>
<script src=http://54.85.159.254:443/socket.io/socket.io.js></script>
<script src=components/CustomElements/custom-elements.js></script>
<script src=components/time-elements/time-elements.js></script>
<script src=components/lodash/dist/lodash.min.js></script>
<script src=components/d3/d3.min.js></script>
<script src=nio.js></script>
<h1><span class="icon icon-nio icon-large" title=nio.js></span></h1>
<div class=actions>
	<input id=host type=url value=http://54.85.159.254>
	<button id=update-host>Update host</button>
	<button id=add-post>Add a post</button>
	<button id=delete-post>Delete a post</button>
</div>
<div id=tiles></div>

<script>
	var elHost = d3.select('#host')
	var tiles = showTiles()

	function showTiles() {
		var src = nio.json('http://54.85.159.254')
		var posts = nio.collection(nio.models.Post)
		var tiles = nio.tiles('#tiles')
		posts.on('data', function (data) { console.log(data) })

		src.get('posts')
			.pipe(nio.collection(nio.models.Post))
			.sort('time', true)
			.pipe(nio.utils.logStream())
			.pipe(tiles)
	}

	d3.select('#add-post').on('click', function () {
		console.log('add a post')
	})

	d3.select('#delete-post').on('click', function () {
		console.log('delete a post')
	})

	d3.select('#host').on('change', function () {
		tiles = showTiles()
	})
</script>
