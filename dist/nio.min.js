var htmlTemplates=htmlTemplates||{};htmlTemplates["tiles/tiles.html"]='<div class="tile tile--<%=type%><% if (media_url) { %> has-media<% } %><% if (profile_image_url) { %> has-profile-image<% } %>">\n	<header class=tile-header>\n		<a class="tile-author u-block">\n			<% if (profile_image_url) { %>\n				<img class=tile-author-avatar src="<%=profile_image_url%>" alt="<%=name%>\'s avatar">\n			<% } %>\n			<strong class="tile-author-name u-textTruncate"><%=name%></strong>\n			<time is=relative-time datetime="<%=time%>"><%=time%></time>\n		</a>\n		<span class="icon icon-<%=type%>"></span>\n	</header>\n	<div class=tile-content>\n		<% if (media_url) { %>\n			<img class=tile-media src="<%=media_url%>" alt="<%=text%>" title="<%=text%>">\n			<div class="tile-text u-marquee">\n				<div>\n					<span><%=linkify(truncate(text, 140))%></span>\n					<span><%=linkify(truncate(text, 140))%></span>\n				</div>\n			</div>\n		<% } else { %>\n			<div class=tile-text><%=linkify(truncate(text, 140))%></div>\n		<% } %>\n	</div>\n	<footer class=tile-footer>\n		<a class="block u-pullLeft" href="<%=link%>" target=_blank>\n			View post\n		</a>\n		<a class="block u-pullRight" href=#>\n			Share\n		</a>\n	</footer>\n</div>\n',function t(e,n,r){function i(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){}function i(t){return function(){this[t]?this[t].apply(this,arguments):this.emit("error",new Error(t+" has not been implemented"))}}function a(){r.call(this)}function s(t){a.call(this),this._write=t}function o(t){a.call(this),this._write=t}function l(){a.call(this)}function u(t,e){l.call(this),this.host=t,this.interval=null,this.lastPath=null,this.pollRate=e||2e4}function c(t){l.call(this),this.ws=null,this.host=t}function h(t,e){this.msg=t||"Hello world",this.rate=e||1e3,this.interval=null}n.passthrough=function(t){return new o(t)},n.readable=function(t){return new a(t)},n.transform=function(t){return new s(t)},n.socketio=function(t){return new c(t)},n.json=function(t,e){return new u(t,e)},n.generate=function(t,e){return new h(t,e)},r.prototype=Object.create(Object.prototype,{on:{value:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)}},off:{value:function(t,e){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)}},emit:{value:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=Array.prototype.slice.call(arguments,1),n=0,r=this._events[t].length;r>n;n++)this._events[t][n].apply(this,e)}}}),n.mustImplement=i,a.prototype=Object.create(r.prototype,{push:{value:function(t){t&&this.emit("data",t)}},pipe:{value:function(t){return this.on("data",t.write.bind(t)),t}},split:{value:function(){for(var t=_.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),e=t.length;e--;)this.pipe(t[e]);return this}},pull:{value:function(){for(var t=_.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),e=t.length;e--;)t[e].pipe(this);return this}}}),n.Readable=a,s.prototype=Object.create(a.prototype,{write:{value:i("_write")}}),n.Transform=s,o.prototype=Object.create(a.prototype,{write:{value:function(t){this.push(t),this._write&&this._write(t)}}}),n.PassThrough=o,l.prototype=Object.create(a.prototype,{start:{value:i},pause:{value:i},resume:{value:i}}),n.Source=l,u.prototype=Object.create(l.prototype,{start:{value:function(t){return this.fetch(t),this.interval=setInterval(function(){return this.fetch(t)}.bind(this),this.pollRate),this}},fetch:{value:function(t){return this.lastPath=t,d3.json(this.host+"/"+t,function(t,e){this.push(e)}.bind(this)),this}},pause:{value:function(){return clearTimeout(this.interval),this}},resume:{value:function(){return this.start(this.lastPath),this}}}),n.JSONStream=u,c.prototype=Object.create(l.prototype,{start:{value:function(t){this.path=t,this.ws=io.connect(this.host);var e=this.ws.socket;return e.on("connect",function(){return this.ws.emit("ready",t)}.bind(this)),e.on("connect_failed",function(){console.error("connection failed")}),e.on("error",function(){console.error("connection error")}),this.resume(),this}},pause:{value:function(){return this.ws.on("recvData",function(){return null}),this}},resume:{value:function(){return this.ws.on("recvData",function(t){return this.push(JSON.parse(t))}.bind(this)),this}}}),n.SocketIOStream=c,h.prototype=Object.create(l.prototype,{start:{value:function(){return this.interval=setInterval(function(){this.push(_.isFunction(this.msg)?this.msg():this.msg)}.bind(this),this.rate),this}},pause:{value:function(){return clearInterval(this.interval),this}},resume:{value:function(){return this.start()}}}),n.GeneratorStream=h},{}],2:[function(t){var e=window.nio=t("./core");e.utils=t("./utils"),e.collect=function(t){var n=t.transforms||[],r=t.max||9,i=t.min||0,a=t.dupes||!1;a&&(_.isString(a)?a=function(e){return e[t.dupes]}:_.isBoolean(a)&&(a=function(t){return t}));var s=t.sortDesc||!0,o=t.sort||!1;o&&(_.isString(o)?o=function(e){return e[t.sort]}:_.isBoolean(o)&&(o=function(t){return t}));var l=[];return e.transform(function(t){if(a){var e=a(t),u=function(t){return e===a(t)};if(_.any(l,u))return}l.push(t);for(var c=0,h=n.length;h>c;c++)l=n[c](l);o&&(l=_.sortBy(l,o),s&&(l=l.reverse())),r&&l.length>r&&(l=l.slice(0,r)),i&&l.length<i||this.push(l)})},e.pick=function(t){return e.transform(function(e){if(t in e){var n=e[t];if(_.isArray(n))for(var r=n.length;r--;)this.push(n[r]);else this.push(n)}})},e.defaults=function(t){return e.transform(function(e){this.push(_.defaults(e,t))})},e.log=function(t){return e.passthrough(function(e){t?console.log(t,e):console.log(e)})},e.join=function(){for(var t=new e.PassThrough,n=[].slice.call(arguments),r=n.length;r--;)n[r].pipe(t);return t},e.filter=function(t){return e.transform(function(e){t(e)&&this.push(e)})},e.map=function(t){return e.transform(function(e){for(var n in t){var r=t[n];_.isFunction(r)&&(r=r(e)),e[n]=r}this.push(e)})},e.throttle=function(t){var n=_.throttle(function(t){this.push(t)},t);return e.transform(n)},e.display=function(t,n){var r=d3.select(t),i=n;return _.isString(i)&&(i=function(t){return t[n]}),e.passthrough(function(t){r.html(i?i(t):t)})},e.tiles=t("./tiles/tiles").tiles,e.graphs=t("./graphs/graphs")},{"./core":1,"./graphs/graphs":3,"./tiles/tiles":4,"./utils":5}],3:[function(t,e,n){function r(t){var e="_"+t;return{get:function(){return this[e]},set:function(t){this[e]=t}}}function i(t){s.PassThrough.call(this),_.isString(t)?this.selector=t:_.assign(this,t),this.defaults&&_.defaults(this,this.defaults)}function a(t){i.call(this,t),this.data=[]}var s=t("../core"),o={render:{value:s.mustImplement},update:{value:s.mustImplement}},l=["width","height","domains","tickFormat","title","labels","points","margin"];l.forEach(function(t){o[t]=r(t)}),i.prototype=Object.create(s.PassThrough.prototype,o),a.prototype=Object.create(i.prototype,{defaults:{"static":!0,value:{margin:{top:6,right:40,bottom:20,left:0},height:200,width:600,tickFormat:function(t){return t},points:243,duration:750,rendered:!1}},render:{value:function(){function t(){return d3.svg.axis().scale(p).ticks(5).orient("right")}function e(){return d3.svg.axis().scale(h).orient("bottom")}function n(){i=new Date,h.domain([i-(l-2)*u,i-u]),j.data.forEach(function(t){t.values.push(t.latest),t.values.shift()});var t=S.selectAll(".value").data(j.data),e=t.enter().append("g").attr("class","value").attr("class","value").attr("transform",function(t){return"translate(0,"+p(t.latest.y)+")"});e.append("text").attr("x",9).attr("dy",".32em").style("fill",function(t){return k(t.id)}),e.append("line").attr("x2",6).attr("y2",0).style("stroke",function(t){return k(t.id)}).style("fill","none"),t.exit().remove(),t.select("text").text(function(t){return c(t.latest.y)}),t.transition().duration(u).ease("linear").attr("transform",function(t){return"translate(0,"+p(t.latest.y)+")"});{var r=b.selectAll(".line").data(j.data);r.enter().append("path").attr("class","line").style("opacity",0).style("stroke",function(t){return k(t.id)}).transition().ease("linear").duration(u).style("opacity",1),r.exit().remove()}r.attr("d",function(t){return f(t.values)}),b.attr("transform",null).transition().duration(u).ease("linear").attr("transform","translate("+h(i-(l-1)*u)+")").each("end",n),w.transition().duration(u).ease("linear").call(_)}this.rendered=!0;var r=this.domains,i=new Date,a=this.margin,s=this.height-a.top-a.bottom,o=this.width-a.left-a.right,l=this.points,u=this.duration,c=this.tickFormat,h=d3.time.scale().domain([i-(l-2)*u,i-u]).range([0,o]),p=d3.scale.linear().domain(r&&r.y?r.y:[0,100]).range([s,0]),f=d3.svg.line().interpolate("basis").x(function(t,e){return h(i-(l-1-e)*u)}).y(function(t){return p(t.y)}),d=d3.select(this.selector).append("svg").attr("width",o+a.left+a.right).attr("height",s+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");d.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",o-0).attr("height",s);var m=d.append("g").attr("class","y axis").attr("transform","translate("+o+",0)"),v=t().tickSize(-o,0,0).tickFormat(""),g=(m.append("g").attr("class","y grid").call(v),t());this.tickFormat&&g.tickFormat(this.tickFormat);var y=(m.append("g").attr("class","y ticks").call(g),d.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")")),_=e(),w=y.append("g").attr("class","x ticks").call(_),x=d.append("g").attr("clip-path","url(#clip)"),b=x.append("g").attr("class","lines"),k=d3.scale.category10(),S=d.append("g").attr("class","values").attr("transform","translate("+o+",0)"),O=this.labels;O&&O.y&&d.append("text").attr("class","y label").attr("text-anchor","end").attr("y",o-15).attr("x",-6).attr("dy",".75em").attr("transform","rotate(-90)").text(O.y),O&&O.x&&d.append("text").attr("class","x label").attr("text-anchor","end").attr("y",s-15).attr("x",25).text(O.x);var j=this;return n(),this}},write:{value:function(t){if(this.rendered||this.render(),!_.any(this.data,function(e){return e.id===t.id})){console.log("new series:",t.id);var e=d3.range(this.points).map(function(){return{x:0,y:0}});this.data.push({id:t.id,values:e,latest:t})}for(var n=this.data.length;n--;)this.data[n].id===t.id&&(this.data[n].latest=t)}}}),n.line=function(t){return new a(t)}},{"../core":1}],4:[function(t,e,n){var r=(t("../core"),_.template(htmlTemplates["tiles/tiles.html"],null,{imports:t("../utils")}));n.tiles=function(t){var e=_.isString(t)?t:t.selector,n=(t.numCols||3,t.hasOwnProperty("animSpeed")?t.animSpeed:750),i=d3.select(e),a=function(t){return r(t)},s=function(t){return t?t.id:console.log(t)};return nio.passthrough(function(t){var e=i.selectAll(".tile-wrapper").data(t,s),r=e.order();r.on("click",function(){var t=d3.select(this).select(".tile");t.classed("is-expanded",!t.classed("is-expanded"))});var o=e.enter().append("div").attr("class","tile-wrapper").html(a),l=e.exit();n?(o.style("opacity",0).transition().duration(n).style("opacity",1),l.transition().duration(n).style("opacity",0).remove()):l.remove()})}},{"../core":1,"../utils":5}],5:[function(t,e,n){n.linkify=function(t){return t=t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target=_blank href='$1'>$1</a>"),t=t.replace(/(^|\s)@(\w+)/g,'$1<a target=_blank href="http://twitter.com/$2">@$2</a>'),t.replace(/(^|\s)#(\w+)/g,'$1<a target=_blank href="http://twitter.com/search?q=%23$2">#$2</a>')},n.truncate=function(t,e){return t.length>e?t.substring(0,e-3)+"...":t},n.isArray=_.isArray,n.isFunc=_.isFunction,n.isStr=_.isString},{}]},{},[2]);