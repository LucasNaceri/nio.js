var htmlTemplates=htmlTemplates||{};htmlTemplates["tiles/tiles.html"]='<header class=tile-header>\n	<a class=tile-author>\n		<% if (profile_image_url) { %>\n			<img class=tile-author-avatar src="<%=profile_image_url%>" alt="<%=name%>\'s avatar">\n		<% } %>\n		<strong class=tile-author-name><%=name%></strong>\n	</a>\n	<span class=tile-actions>\n		<span class="icon icon-<%=type%>"></span>\n	</span>\n</header>\n<div class=tile-content>\n	<% if (media_url) { %>\n		<img class=tile-media src="<%=media_url%>" alt="<%=text%>" title="<%=text%>">\n	<% } else { %>\n		<%=linkify(truncate(text, 150))%>\n	<% } %>\n</div>\n<footer class=tile-footer>\n	<p class="tile-share float-left">\n		<a href=#>\n			<span class="icon icon-mini icon-twitter"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-facebook"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-pinterest"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-envelope"></span>\n		</a>\n	<p class=float-right>\n		<time is=relative-time datetime="<%=time%>">\n			<%=time%>\n		</time>\n		<!--<a target=_blank href="<%=link%>">view post</a>-->\n</footer>\n',function t(n,e,r){function i(s,o){if(!e[s]){if(!n[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=e[s]={exports:{}};n[s][0].call(l.exports,function(t){var e=n[s][1][t];return i(e?e:t)},l,l.exports,t,n,e,r)}return e[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t){function n(t){return _.assign(function(){},e._streamer,{write:t})}var e=e||{};e._emitter={on:function(t,n){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(n)},off:function(t,n){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(n),1)},emit:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var n=Array.prototype.slice.call(arguments,1),e=0,r=this._events[t].length;r>e;e++)this._events[t][e].apply(this,n)}},e._mustImplement=function(){this.emit("error",new Error("not implemented"))},e._streamer=_.assign({},e._emitter,{write:e._mustImplement,push:function(t){t&&this.emit("data",t)},pipe:function(t){return this.on("data",t.write.bind(t)),t}}),e._source=_.assign({},e._streamer,{pause:e._mustImplement,resume:e._mustImplement}),e.src={},e.src.json=function(t,n){function r(t){return r.fetch(t),i=setInterval(function(){return r.fetch(t)},n),r}var i=null,a=null;return n=n||2e4,_.assign(r,e._source,{fetch:function(n){a=n,d3.json(t+"/"+n,function(t,e){var i=e[n];if(i&&_.isArray(i))for(var a=i.length;a--;)r.push(i[a]);else r.push(i)})},pause:function(){clearTimeout(i)},resume:function(){r.start(a)}})},e.src.socketio=function(t){function n(e){r=io.connect(t),e="posts"===e?"default":e;var i=r.socket;return i.on("connect",function(){return r.emit("ready",e)}),i.on("connect_failed",function(){return console.error("connection failed")}),i.on("error",function(){return console.error("connection error")}),n.resume(),n}var r=null;return _.assign(n,e._source,{pause:function(){r.on("recvData",function(){return null})},resume:function(){r.on("recvData",function(t){return n.push(JSON.parse(t))})}})},e.src.mux=function(){function t(e){return n.forEach(function(t){return t(e)}),t}var n=[].slice.call(arguments);return _.assign(t,e._source,{pause:function(){n.forEach(function(t){return t.pause()})},resume:function(){n.forEach(function(t){return t.resume()})}})},e.src.test=function(t,n){var r=null,i=_.assign({},e._source,{pause:function(){clearInterval(r)},resume:function(){r=setInterval(function(){i.push(_.isFunction(t)?t():t)},n||1e3)}});return i.resume(),i},e.collect=function(){var t=[],n=[],r=null;return _.assign({},e._streamer,{write:function(e){var i=r?r(e):null;r&&_.any(n,function(t){return i===r(t)})||(n.push(e),t.forEach(function(t){n=t(n)}),this.push(n))},transform:function(n){return t.push(n),this},sort:function(t,n){return this.transform(function(e){var r=_.sortBy(e,t);return n?r.reverse():r})},dupes:function(t){return t||(t=function(t){return t}),r=t,n=_.unique(n,t),this}})},e.transform=function(t){return n(function(n){this.push(t(n))})},e.defaults=function(t){return e.transform(function(n){return _.defaults(n,t)})},e.log=function(){return n(function(t){console.log(t),this.push(t)})},e.filter=function(t){return e.transform(function(n){return t(n)?n:null})},e.utils={},e.utils.linkify=function(t){return t=t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target=_blank href='$1'>$1</a>"),t=t.replace(/(^|\s)@(\w+)/g,'$1<a target=_blank href="http://twitter.com/$2">@$2</a>'),t.replace(/(^|\s)#(\w+)/g,'$1<a target=_blank href="http://twitter.com/search?q=%23$2">#$2</a>')},e.utils.truncate=function(t,n){return t.length>n?t.substring(0,n-3)+"...":t},window.nio=e,t("./tiles/tiles"),t("./graphs/graphs")},{"./graphs/graphs":2,"./tiles/tiles":3}],2:[function(){function t(t){return function(n){return n?(this["_"+t]=n,this):this["_"+t]}}nio.graphs={},nio.graphs._graph=_.assign({},nio._streamer,{width:t("width"),height:t("height"),domains:t("domains"),tickFormat:t("tickFormat"),title:t("title"),labels:t("labels"),render:nio._mustImplement}),nio.graphs.dataset=function(){return _.assign({},nio._streamer,{getter:function(t,n){return n?(this[t]=_.isString(n)?function(t){return t[n]}:n,this):this[t]},x:function(t){return this.getter("getX",t)},y:function(t){return this.getter("getY",t)},id:function(t){return this.getter("getID",t)},label:function(t){return this.getter("getLabel",t)},write:function(t){this.push({x:this.getX?this.getX(t):0,y:this.getY?this.getY(t):0,id:this.getID?this.getID(t):"",label:this.getLabel?this.getLabel(t):""})}})},nio.graphs.line=function(t){function n(){function n(){return d3.svg.axis().scale(m).ticks(5).orient("right")}function s(){return d3.svg.axis().scale(p).orient("bottom")}function o(){i=new Date,p.domain([i-(e-2)*r,i-r]),a.forEach(function(t){t.values.push(t.latest),t.values.shift()});var t=$.selectAll(".value").data(a),n=t.enter().append("g").attr("class","value").attr("class","value").attr("transform",function(t){return"translate(0,"+m(t.latest.y)+")"});n.append("text").attr("x",9).attr("dy",".32em").style("fill",function(t){return D(t.id)}),n.append("line").attr("x2",6).attr("y2",0).style("stroke",function(t){return D(t.id)}).style("fill","none"),t.exit().remove(),t.select("text").text(function(t){return f(t.latest.y)}),t.transition().duration(r).ease("linear").attr("transform",function(t){return"translate(0,"+m(t.latest.y)+")"});var s=I.selectAll(".line").data(a);s.enter().append("path").attr("class","line").style("opacity",0).style("stroke",function(t){return D(t.id)}).transition().ease("linear").duration(r).style("opacity",1),s.exit().remove(),s.attr("d",function(t){return d(t.values)}),I.attr("transform",null).transition().duration(r).ease("linear").attr("transform","translate("+p(i-(e-1)*r)+")").each("end",o),b.transition().duration(r).ease("linear").call(w)}var u={top:6,right:40,bottom:20,left:0},l=(this.width()||960)-u.right,c=(this.height()||200)-u.top-u.bottom,f=this.tickFormat()||function(t){return t},h=this.domains(),p=d3.time.scale().domain([i-(e-2)*r,i-r]).range([0,l]),m=d3.scale.linear().domain(h&&h.y?h.y:[0,100]).range([c,0]),d=d3.svg.line().interpolate("basis").x(function(t,n){return p(i-(e-1-n)*r)}).y(function(t){return m(t.y)}),g=d3.select(t).append("svg").attr("width",l+u.left+u.right).attr("height",c+u.top+u.bottom).append("g").attr("transform","translate("+u.left+","+u.top+")");g.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",l-0).attr("height",c);var _=g.append("g").attr("class","y axis").attr("transform","translate("+l+",0)"),v=n().tickSize(-l,0,0).tickFormat(""),y=(_.append("g").attr("class","y grid").call(v),n().tickFormat(f)),x=(_.append("g").attr("class","y ticks").call(y),g.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")")),w=s(),b=x.append("g").attr("class","x ticks").call(w),k=g.append("g").attr("clip-path","url(#clip)"),I=k.append("g").attr("class","lines"),D=d3.scale.category10(),$=g.append("g").attr("class","values").attr("transform","translate("+l+",0)"),A=this.labels();A&&A.y&&g.append("text").attr("class","y label").attr("text-anchor","end").attr("y",l-15).attr("x",-6).attr("dy",".75em").attr("transform","rotate(-90)").text(A.y),A&&A.x&&g.append("text").attr("class","x label").attr("text-anchor","end").attr("y",c-15).attr("x",25).text(A.x);o()}var e=243,r=750,i=new Date(Date.now()-r),a=[];return _.assign(n,nio.graphs._graph,{render:n,write:function(t){this.push(t),_.any(a,function(n){return n.id===t.id})||(console.log("new series:",t.id),a.push({id:t.id,values:d3.range(e).map(function(){return{x:0,y:0}}),latest:t}));for(var n=a.length;n--;)a[n].id===t.id&&(a[n].latest=t)}})}},{}],3:[function(){var t=_.template(htmlTemplates["tiles/tiles.html"],null,{imports:nio.utils});nio.tiles=function(n){function e(){var n=r.selectAll("div").data(i);n.enter().append("div"),n.attr("class",function(t){return"tile tile-"+t.type+(t.media_url?" tile-has-media":"")}).html(function(n){return t(n)}),n.exit()}var r=d3.select(n),i=[],a=_.debounce(e,1e3);return a(),_.assign({},nio._streamer,{write:function(t){i=t,a(),this.push(i)}})}},{}]},{},[1]);