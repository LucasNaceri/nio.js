<!doctype html>
<meta charset=utf-8>
<title>nio.js examples</title>

<link rel=stylesheet href=../dist/nio.min.css>
<link rel=stylesheet href=example.css>
<script src=http://54.85.159.254:443/socket.io/socket.io.js></script>
<script src=../components/lodash/dist/lodash.min.js></script>
<script src=../components/d3/d3.js></script>
<script src=../dist/nio.js></script>
<h1><span class="icon icon-nio icon-large" title=nio.js></span></h1>
<div class=container>
	<h2>CPU Usage</h2>
	<div id=disk></div>
	<div id=graph></div>
</div>
<script>
	var sources = [
		nio.socketio('http://54.197.236.34:443')
			.start('monitoring')
			.pipe(nio.map({
				y: function (d) { return d.cpu },
				id: function (d) { return d.name },
				label: function (d) { return d.name }
			})),
		nio.socketio('http://54.85.159.254:443')
			.start('monitoring')
			.pipe(nio.filter(function (d) { return d.id === 'cpu' }))
			.pipe(nio.map({
				y: function (d) { return d.percent },
				id: function (d) { return d.id },
				label: function (d) { return d.name }
			})),
		nio.generate(function () {
			return {
				y: Math.random() * 50,
				id: 'random',
				label: 'Random CPU Percent'
			}
		}).start()
	]

	nio.graphs.line({
		selector: '#graph',
		domains: {y: [0, 100]},
		tickFormat: function (d) { return Math.floor(d) + '%' },
		labels: {y: 'cpu usage (%)'}
	})
		.pull(sources)
		.render()

	sources[0]
		.pipe(nio.filter(function (d) { return d.id == 'NIO1-Production' }))
		.split(
			nio.throttle(1000).pipe(nio.display('#disk', 'cpu'))
		)

</script>
