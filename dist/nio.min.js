var htmlTemplates=htmlTemplates||{};htmlTemplates["tiles/tiles.html"]='<header class=tile-header>\n	<a class=tile-author>\n		<% if (profile_image_url) { %>\n			<img class=tile-author-avatar src="<%=profile_image_url%>" alt="<%=name%>\'s avatar">\n		<% } %>\n		<strong class=tile-author-name><%=name%></strong>\n	</a>\n	<span class=tile-actions>\n		<span class="icon icon-<%=type%>"></span>\n	</span>\n</header>\n<div class=tile-content>\n	<% if (media_url) { %>\n		<img class=tile-media src="<%=media_url%>" alt="<%=text%>" title="<%=text%>">\n	<% } else { %>\n		<%=linkify(truncate(text, 150))%>\n	<% } %>\n</div>\n<footer class=tile-footer>\n	<p class="tile-share float-left">\n		<a href=#>\n			<span class="icon icon-mini icon-twitter"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-facebook"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-pinterest"></span>\n		</a>\n		<a href=#>\n			<span class="icon icon-mini icon-envelope"></span>\n		</a>\n	<p class=float-right>\n		<time is=relative-time datetime="<%=time%>">\n			<%=time%>\n		</time>\n		<!--<a target=_blank href="<%=link%>">view post</a>-->\n</footer>\n',function t(n,e,r){function i(a,o){if(!e[a]){if(!n[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=e[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return i(e?e:t)},c,c.exports,t,n,e,r)}return e[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t){function n(t){return _.assign(function(){},e._streamer,{write:t})}var e=e||{};e._emitter={on:function(t,n){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(n)},off:function(t,n){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(n),1)},emit:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var n=Array.prototype.slice.call(arguments,1),e=0,r=this._events[t].length;r>e;e++)this._events[t][e].apply(this,n)}},e._mustImplement=function(){this.emit("error",new Error("not implemented"))},e._streamer=_.assign({},e._emitter,{write:e._mustImplement,push:function(t){t&&this.emit("data",t)},pipe:function(t){return this.on("data",t.write.bind(t)),t}}),e._source=_.assign({},e._streamer,{pause:e._mustImplement,resume:e._mustImplement}),e.src={},e.src.json=function(t,n){function r(t){return r.fetch(t),i=setInterval(function(){return r.fetch(t)},n),r}var i=null,s=null;return n=n||2e4,_.assign(r,e._source,{fetch:function(n){s=n,d3.json(t+"/"+n,function(t,e){var i=e[n];if(i&&_.isArray(i))for(var s=i.length;s--;)r.push(i[s]);else r.push(i)})},pause:function(){clearTimeout(i)},resume:function(){r.start(s)}})},e.src.socketio=function(t){function n(e){r=io.connect(t),e="posts"===e?"default":e;var i=r.socket;return i.on("connect",function(){return r.emit("ready",e)}),i.on("connect_failed",function(){return console.error("connection failed")}),i.on("error",function(){return console.error("connection error")}),n.resume(),n}var r=null;return _.assign(n,e._source,{pause:function(){r.on("recvData",function(){return null})},resume:function(){r.on("recvData",function(t){return n.push(JSON.parse(t))})}})},e.src.mux=function(){function t(e){return n.forEach(function(t){return t(e)}),t}var n=[].slice.call(arguments);return _.assign(t,e._source,{pause:function(){n.forEach(function(t){return t.pause()})},resume:function(){n.forEach(function(t){return t.resume()})}})},e.src.test=function(t,n){var r=null,i=_.assign({},e._source,{pause:function(){clearInterval(r)},resume:function(){r=setInterval(function(){i.push(_.isFunction(t)?t():t)},n||1e3)}});return i.resume(),i},e.collect=function(){var t=[],n=[],r=null;return _.assign({},e._streamer,{write:function(e){var i=r?r(e):null;r&&_.any(n,function(t){return i===r(t)})||(n.push(e),t.forEach(function(t){n=t(n)}),this.push(n))},transform:function(n){return t.push(n),this},sort:function(t,n){return this.transform(function(e){var r=_.sortBy(e,t);return n?r.reverse():r})},dupes:function(t){return t||(t=function(t){return t}),r=t,n=_.unique(n,t),this}})},e.transform=function(t){return n(function(n){this.push(t(n))})},e.defaults=function(t){return e.transform(function(n){return _.defaults(n,t)})},e.log=function(){return n(function(t){console.log(t),this.push(t)})},e.filter=function(t){return e.transform(function(n){return t(n)?n:null})},e.utils={},e.utils.linkify=function(t){return t=t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target=_blank href='$1'>$1</a>"),t=t.replace(/(^|\s)@(\w+)/g,'$1<a target=_blank href="http://twitter.com/$2">@$2</a>'),t.replace(/(^|\s)#(\w+)/g,'$1<a target=_blank href="http://twitter.com/search?q=%23$2">#$2</a>')},e.utils.truncate=function(t,n){return t.length>n?t.substring(0,n-3)+"...":t},window.nio=e,t("./tiles/tiles"),t("./graphs/graphs")},{"./graphs/graphs":2,"./tiles/tiles":3}],2:[function(){nio.graphs={},nio.graphs._graph=_.assign({},nio._streamer,{width:function(t){return t?(this.width=t,this):this.width},height:function(t){return t?(this.height=t,this):this.height},domains:function(t){return t?(this.domains=t,this):this.domains},render:nio._mustImplement}),nio.graphs.dataset=function(){return _.assign({},nio._streamer,{getter:function(t,n){return n?(this[t]=_.isString(n)?function(t){return t[n]}:n,this):this[t]},x:function(t){return this.getter("getX",t)},y:function(t){return this.getter("getY",t)},id:function(t){return this.getter("getID",t)},label:function(t){return this.getter("getLabel",t)},write:function(t){this.push({x:this.getX?this.getX(t):0,y:this.getY?this.getY(t):0,id:this.getID?this.getID(t):"",label:this.getLabel?this.getLabel(t):""})}})},nio.graphs.line=function(){function t(){function t(){r=new Date,u.domain([r-(n-2)*e,r-e]),i.forEach(function(t){t.values.push(t.latest),t.values.shift()});var s=m.selectAll(".line").data(i);s.enter().append("path").attr("class","line").style("opacity",0).style("stroke",function(t){return g(t.id)}).transition().duration(500).style("opacity",1),s.attr("d",function(t){return l(t.values)}),m.attr("transform",null).transition().duration(e).ease("linear").attr("transform","translate("+u(r-(n-1)*e)+")").each("end",t),h.transition().duration(e).ease("linear").call(u.axis)}var s={top:6,right:0,bottom:20,left:40},a=960-s.right,o=120-s.top-s.bottom,u=d3.time.scale().domain([r-(n-2)*e,r-e]).range([0,a]),c=d3.scale.linear().domain([0,100]).range([o,0]),l=d3.svg.line().interpolate("basis").x(function(t,i){return u(r-(n-1-i)*e)}).y(function(t){return c(t.y)}),f=d3.select("body").append("p").append("svg").attr("width",a+s.left+s.right).attr("height",o+s.top+s.bottom).style("margin-left",-s.left+"px").append("g").attr("transform","translate("+s.left+","+s.top+")");f.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",a-10).attr("height",o);var h=f.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(u.axis=d3.svg.axis().scale(u).orient("bottom")),p=f.append("g").attr("clip-path","url(#clip)"),m=p.append("g");t();var g=d3.scale.category10()}var n=243,e=750,r=new Date(Date.now()-e),i=[];return _.assign(t,nio.graphs._graph,{domains:function(t){return domains=t,this},render:t,write:function(t){this.push(t),_.any(i,function(n){return n.id===t.id})||(console.log("new series:",t.id),i.push({id:t.id,values:d3.range(n).map(function(){return{x:0,y:0}}),latest:t}));for(var e=i.length;e--;)i[e].id===t.id&&(i[e].latest=t)}})}},{}],3:[function(){var t=_.template(htmlTemplates["tiles/tiles.html"],null,{imports:nio.utils});nio.tiles=function(n){function e(){var n=r.selectAll("div").data(i);n.enter().append("div"),n.attr("class",function(t){return"tile tile-"+t.type+(t.media_url?" tile-has-media":"")}).html(function(n){return t(n)}),n.exit()}var r=d3.select(n),i=[],s=_.debounce(e,1e3);return s(),_.assign({},nio._streamer,{write:function(t){i=t,s(),this.push(i)}})}},{}]},{},[1]);