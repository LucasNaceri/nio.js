var htmlTemplates=htmlTemplates||{};htmlTemplates["_tile-footer.html"]='<div class="tile-footer">\n	<ul class="tile-share">\n		<li class="twitter">\n			<a href="https://twitter.com/intent/tweet?url={{urlEscape link}}&amp;text={{urlEscape text}} - via @gobuffsio" title="Share on Twitter" target="_blank">\n				Share on Twitter\n			</a>\n		<li class="facebook">\n			<a href="http://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]={{urlEscape link}}&amp;p[images][0]={{HERE}}&amp;p[title]={{HERE}}" title="Share on Facebook" target="_blank">\n				Share on Facebook\n			</a>\n		<li class="pinterest">\n			<a href="https://www.pinterest.com/pin/create/button/?url={{urlEscape link}}&amp;media={{HERE}}&amp;description={{text}}" title="Pin It" target="_blank">\n				Pin It\n			</a>\n		<li class="email">\n			<a href="mailto:?subject=Check out this post from gobuffs.io&amp;body={{text}} -- {{urlEscape link}} -- via http://gobuffs.io" title="Email It" target="_blank">\n				Share via Email\n			</a>\n	</ul>\n	<a href="{{link}}" title="View Post" target="_blank" class="post-link original-post">\n		view post\n	</a>\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["blank.html"]='<div class="tile-content"></div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["facebook.html"]='<div class=tile-content>\n	<div class="tile-info clearfix">\n		<div class=profile-pic style="background-image: url(\'{{profile_image_url}}?type=normal\');"></div>\n		<div class=originator-name title="{{name}}">\n			<a class=originator-link>{{name}}</a>\n		</div>\n		<div class=pinned><p>Pinned</div>\n		<div class=tile-logo></div>\n	</div>\n\n	<div class=shortContent>\n		{{{linkUrl shortenedText}}}\n	</div>\n\n	<div class=content>\n		{{{linkUrl text}}}\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">\n			{{timeDiff seconds_ago}}\n		</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["gplus.html"]='<div class=tile-content>\n	<div class="tile-info clearfix">\n		<div class=originator-name title="{{name}}">\n			<a class="originator-link">\n				{{name}}\n			</a>\n		</div>\n		<div class=pinned><p>Pinned</div>\n		<div class=tile-logo></div>\n	</div>\n\n	<div class=shortContent>\n		{{{linkUrl shortenedText}}}\n	</div>\n\n	<div class=content>\n		{{{alt_text}}}\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">\n			{{timeDiff seconds_ago}}\n		</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["instagram.html"]='<div class="tile-content">\n	<img src="{{media_url}}" alt="{{text}}" onError="this.onerror=null;this.parentNode.removeChild(this);" />\n	{{#if text}}\n	{{text}}\n	{{/if}}\n	<div class="tile-info clearfix">\n		<div class="profile-pic" style="background-image: url(\'{{profile_image_url}}?type=normal\');"></div>\n		<div class="originator-name" title="{{name}}"><a class="originator-link">{{name}}</a></div>\n		<div class="pinned"><p>Pinned</p></div>\n		<div class="tile-logo"></div>\n	</div>\n\n	<div class="image-content">\n		<div class="full-image" style="background-image: url(\'{{media_url}}\')"></div>\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">{{timeDiff seconds_ago}}</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["linkedin.html"]='<div class="tile-content">\n	<div class="tile-info clearfix">\n		<div class="originator-name" title="{{name}}"><a class="originator-link">{{name}}</a></div>\n		<div class="pinned"><p>Pinned</p></div>\n		<div class="tile-logo"></div>\n	</div>\n\n	<div class="shortContent">\n		{{{linkUrl shortenedText}}}\n	</div>\n\n	<div class="content">\n		{{{linkUrl text}}}\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">{{timeDiff seconds_ago}}</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["rss.html"]='<div class="tile-content">\n	<div class="tile-info clearfix">\n		<div class="originator-name" title="{{name}}"><a class="originator-link">{{name}}</a></div>\n		<div class="pinned"><p>Pinned</p></div>\n		<div class="tile-logo"></div>\n	</div>\n\n	<div class="shortContent">\n		{{{linkUrl shortenedText}}}\n	</div>\n\n	<div class="content">\n		<span class="headline">{{{linkUrl text}}}</span>\n		<br/><br/>\n		{{{linkUrl alt_text}}}\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">{{timeDiff seconds_ago}}</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["share_flip.html"]='<div class="source-wrapper {{source_type}}">\n	<div class="tile-content">\n		<ul class="tile-share clearfix">\n\n			<li class="twitter">\n				<a href="https://twitter.com/intent/tweet?url={{urlEscape link}}&amp;text={{text}}" title="Share on Twitter" target="_blank">\n					Share on Twitter</a>\n			</li>\n\n			<li class="facebook">\n				<a href="http://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]={{urlEscape link}}&amp;p[images][0]={{HERE}}&amp;p[title]={{HERE}}" title="Share on Facebook" target="_blank">\n					Share on Facebook</a>\n			</li>\n\n			<li class="gplus">\n				<a href="https://plus.google.com/share?url={{urlEscape link}}" title="Share on Google Plus" target="_blank">\n					Share on Google Plus</a>\n			</li>\n\n			<li class="pinterest">\n				<a href="https://www.pinterest.com/pin/create/button/?url={{urlEscape link}}&amp;media={{HERE}}&amp;description={{text}}" title="Pin It" target="_blank">\n					Pin It</a>\n			</li>\n\n			<li class="linkedin">\n				<a href="https://www.linkedin.com/shareArticle?summary={{text}}&amp;url={{urlEscape link}}&amp;title={{HERE}}&amp;mini=true&amp;source=" title="Share on LinkedIn" target="_blank">\n					Share on LinkedIn</a>\n			</li>\n\n			<li class="pocket">\n				<a href="https://getpocket.com/save?url={{urlEscape link}}" data-lang="en" data-save-url="{{link}}"  title="Save to Pocket" target="_blank">\n					Save to Pocket</a>\n			</li>\n\n		</ul>\n	</div>\n	<!-- /.tile-content -->\n\n	<div class="tile-info clearfix">\n		<div class="originator-name">\n			Share This</div>\n		<div class="close"><a href="#" title="Close">Close</a></div>\n	</div><!-- /.tile-info -->\n</div><!-- /.source-wrapper -->\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["sponsored.html"]='<div class="sponsored-flag"><p>Sponsored</p></div>\n<div class="tile-content"><a href="#" title="{{name}}" ><img src="{{media_url}}" alt="{{text}}" /></a></div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["stat-count.html"]='<div class="source-wrapper {{source_type}}">\n	<div class="pinned"><p>Pinned</p></div>\n	<div class="tile-content">\n		<div class="number">{{roundNumber (numberLocale count) 0}}</div>\n	</div>\n	<div class="tile-info clearfix">\n		<div class="originator-name">{{maxLength name 25}}</div>\n	</div>\n</div><!-- /.source-wrapper -->\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["stat-percent.html"]='<div class="source-wrapper {{source_type}}">\n	<div class="pinned"><p>Pinned</p></div>\n	<div class="tile-content">\n		<div class="percentage">{{roundNumber percent 0}}<sup>%</sup></div>\n	</div>\n	<div class="tile-info clearfix">\n		<div class="originator-name">{{maxLength name 25}}</div>\n	</div>\n</div><!-- /.source-wrapper -->\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["stat-time.html"]='<div class="source-wrapper {{source_type}}">\n	<div class="pinned"><p>Pinned</p></div>\n	<div class="tile-content">\n		<div class="time-stamp">{{dateFormat time \'h\'}}:{{dateFormat time \'mm\'}}<span class="ampm">{{dateFormat time \'A\'}}</span></div>\n		<div class="duration-passed">( {{timeDiff seconds_ago}} )</div>\n	</div>\n	<div class="tile-info clearfix">\n		<div class="originator-name">{{maxLength name 25}}</div>\n	</div>\n</div><!-- /.source-wrapper -->\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["tile.html"]='<div class=tile-content>\n	<div class="tile-info clearfix">\n		<div class=profile-pic style="background-image: url(\'{{profile_image_url}}?type=normal\');"></div>\n		<div class=originator-name title="{{name}}">\n			<a class=originator-link>{{name}}</a>\n		</div>\n		<div class=pinned><p>Pinned</div>\n		<div class=tile-logo></div>\n	</div>\n\n	<div class=shortContent>\n		{{{linkUrl shortenedText}}}\n	</div>\n\n	<div class=content>\n		{{{linkUrl text}}}\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">\n			{{timeDiff seconds_ago}}\n		</div>\n	{{/ifCond}}\n\n	<div class=tile-footer>\n		<ul class=tile-share>\n			<li class=twitter>\n				<a target=_blank href="https://twitter.com/intent/tweet?url={{urlEscape link}}&amp;text={{urlEscape text}} - via @gobuffsio" title="Share on Twitter">\n					Share on Twitter\n				</a>\n			<li class=facebook>\n				<a target=_blank href="http://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]={{urlEscape link}}&amp;p[images][0]={{HERE}}&amp;p[title]={{HERE}}" title="Share on Facebook">\n					Share on Facebook\n				</a>\n			<li class=pinterest>\n				<a target=_blank href="https://www.pinterest.com/pin/create/button/?url={{urlEscape link}}&amp;media={{HERE}}&amp;description={{text}}" title="Pin It">\n					Pin It\n				</a>\n			<li class=email>\n				<a target=_blank href="mailto:?subject=Check out this post from gobuffs.io&amp;body={{text}} -- {{urlEscape link}} -- via http://gobuffs.io" title="Email It">\n					Share via Email\n				</a>\n		</ul>\n		<a target=_blank href="{{link}}" title="View Post" class="post-link original-post">\n			view post\n		</a>\n	</div>\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["twitter-photo.html"]='<div class="tile-content">\n	<img src="{{media_url}}" alt="{{text}}" onError="this.onerror=null;this.parentNode.removeChild(this);" />\n	<div class="tile-info clearfix">\n		<div class="profile-pic" style="background-image: url(\'{{profile_image_url}}?type=normal\');"></div>\n		<div class="originator-name" title="{{name}}"><a class="originator-link">{{name}}</a></div>\n		<div class="pinned"><p>Pinned</p></div>\n		<div class="tile-logo"></div>\n	</div>\n\n	<div class="image-content">\n		<div class="full-image" style="background-image: url(\'{{media_url}}\')"></div>\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">{{timeDiff seconds_ago}}</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["twitter.html"]='<div class="tile-content">\n	<div class="tile-info clearfix">\n		<div class="profile-pic" style="background-image: url(\'{{profile_image_url}}?type=normal\');"></div>\n		<div class="originator-name" title="{{name}}"><a class="originator-link">{{name}}</a></div>\n		<div class="pinned"><p>Pinned</p></div>\n		<div class="tile-logo"></div>\n	</div>\n\n	<div class="shortContent">\n		{{{linkUrl text}}}\n	</div>\n\n	<div class="content">\n		{{{linkUrl text}}}\n	</div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">{{timeDiff seconds_ago}}</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n';var htmlTemplates=htmlTemplates||{};htmlTemplates["youtube.html"]='<div class="tile-content">\n\n	<div class="video-cover-image" style="background-image: url(\'http://img.youtube.com/vi/{{id}}/mqdefault.jpg\');">\n		<div class="play-button"></div>\n	</div>\n\n	<div class="tile-info clearfix">\n		<div class="originator-name" title="{{name}}"><a class="originator-link">{{name}}</a></div>\n		<div class="pinned"><p>Pinned</p></div>\n		<div class="tile-logo"></div>\n		<div class="close-tile"><p>Close</p></div>\n	</div>\n\n	<div class="youtube-player" id="{{id}}"></div>\n\n	{{#ifCond seconds_ago "<" 3600}}\n		<div class="time-since-flag {{#ifCond seconds_ago \'<\' 60}}is-new{{/ifCond}}">{{timeDiff seconds_ago}}</div>\n	{{/ifCond}}\n\n	{{> tile-footer}}\n</div>\n',function e(t,i,n){function s(l,o){if(!i[l]){if(!t[l]){var r="function"==typeof require&&require;if(!o&&r)return r(l,!0);if(a)return a(l,!0);throw new Error("Cannot find module '"+l+"'")}var c=i[l]={exports:{}};t[l][0].call(c.exports,function(e){var i=t[l][1][e];return s(i?i:e)},c,c.exports,e,t,i,n)}return i[l].exports}for(var a="function"==typeof require&&require,l=0;l<n.length;l++)s(n[l]);return s}({1:[function(){window.$=jQuery,window.compiledTemplates={},_.forEach(["tile","blank","facebook","gplus","instagram","linkedin","rss","share_flip","sponsored","stat-count","stat-percent","stat-time","twitter","twitter-photo","youtube"],function(e){var t=htmlTemplates[e+".html"];compiledTemplates[e]=Handlebars.compile(t)}),Handlebars.registerPartial("tile-footer",htmlTemplates["_tile-footer.html"]),Handlebars.registerHelper("urlEscape",function(e){return encodeURIComponent(e)}),Handlebars.registerHelper("numberLocale",function(e){var t=parseFloat(e);return isNaN(t)||!isFinite(t)?e:t.toLocaleString()}),Handlebars.registerHelper("stripSlashes",function(e){return e.replace(/\\/g,"")}),Handlebars.registerHelper("linkUrl",function(e){return e=e.replace(/^\s*/,""),e=e.replace(/\n/g,"<br>\n"),e.replace(/(http\S+)/gi,'<a href="$1" target="_blank">$1</a>')}),Handlebars.registerHelper("ifCond",function(e,t,i,n){switch(t){case"==":return e==i?n.fn(this):n.inverse(this);case"===":return e===i?n.fn(this):n.inverse(this);case"<":return i>e?n.fn(this):n.inverse(this);case"<=":return i>=e?n.fn(this):n.inverse(this);case">":return e>i?n.fn(this):n.inverse(this);case">=":return e>=i?n.fn(this):n.inverse(this);case"&&":return e&&i?n.fn(this):n.inverse(this);case"||":return e||i?n.fn(this):n.inverse(this);default:return n.inverse(this)}}),Handlebars.registerHelper("strReplace",function(e,t,i){return e.replace(t,i)}),Handlebars.registerHelper("dateFormat",function(e,t){e=e.replace("T"," "),e=e.replace("Z","");var i=moment(e+" +0000","YYYY-MM-DD HH:mm:ss.SSS Z");return i&&i.isValid()?i.format(t):e}),Handlebars.registerHelper("timeDiff",function(e){function t(){return" ago"}if(0>=e)return"just now!";var i=Math.floor(e/31536e3);if(i)return i+"y"+t(i);var n=Math.floor((e%=31536e3)/86400);if(n)return n+"d"+t(n);var s=Math.floor((e%=86400)/3600);if(s)return s+"h"+t(s);var a=Math.floor((e%=3600)/60);return a?a+"m"+t(a):60>e?e+"s"+t(e):"just now!"}),Handlebars.registerHelper("roundNumber",function(e,t){return parseFloat(e).toFixed(t)}),Handlebars.registerHelper("maxLength",function(e,t){return e.length>t?e.substring(0,t-3)+"...":e})},{}],2:[function(e){!function(){var t=window.nio={views:{},models:{},collections:{}};e("./content.js"),e("./utils.js"),e("./models/Post.js"),e("./models/Tile.js"),e("./views/Tile.js"),e("./views/LookBack.js"),e("./views/Stream.js"),e("./views/RandomStream.js"),e("./views/SearchStream.js"),t.tiles=function(e){return new t.views.RandomStream(e)}}()},{"./content.js":1,"./models/Post.js":3,"./models/Tile.js":4,"./utils.js":5,"./views/LookBack.js":6,"./views/RandomStream.js":7,"./views/SearchStream.js":8,"./views/Stream.js":9,"./views/Tile.js":10}],3:[function(){nio.models.Post=Backbone.Model.extend({initialize:function(e){if(e=e||{},e.id)if(e.profile_image_url);else switch(e.type){case"twitter-photo":case"instagram":this.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default-instagram.png");break;case"facebook":this.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default-facebook.png");break;case"twitter":this.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default-twitter.png")}var t=nio.utils.truncate(this.get("text"),145);this.set("shortenedText",t)},defaults:{id:0,id_value:1,time:0,priority:1,type:"blank",name:"",link:"",text:"",alt_text:"",media_url:"",profile_image_url:"",flag:"old",status_flag:"",seconds_ago:36e4},testImage:function(e){var t=this,i=new Image;i.onload=function(){t.set("profile_image_url",e)},i.onerror=function(){switch(t.get("type")){case"twitter-photo":case"instagram":t.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default-instagram.png");break;case"facebook":t.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default-facebook.png");break;case"twitter":t.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default-twitter.png");break;default:t.set("profile_image_url","/wp-content/themes/wp-theme/images/profile-default.png")}},i.src=e}}),nio.collections.Posts=Backbone.Collection.extend({model:nio.models.Post}),nio.models.PostDictionary=Backbone.Model.extend({initialize:function(e){this.posts=new nio.collections.Posts,this.serviceHost=e},url:function(){return"http://"+this.serviceHost+"/posts"},defaults:{count:0,offset:0,next_offset:0,total:0,posts:new nio.collections.Posts}})},{}],4:[function(){nio.models.Tile=Backbone.Model.extend({defaults:{time:0,rows:1,cols:1,minPriority:1,maxPriority:5,minOldDuration:10,minNewDuration:2,maxDuration:30,availableTypes:[],excludedTypes:[],content:null}}),nio.collections.Tiles=Backbone.Collection.extend({model:nio.models.Tile})},{}],5:[function(){var e=jQuery;window.nio.utils={truncate:function(e,t){var i=e.substr(0,t);return i!==e&&(i=i.trim()+"&hellip; (more)"),i},getCurrentTime:function(){return Math.round(Date.now?Date.now()/1e3:(new Date).getTime()/1e3)},connectToWebSocket:function(e,t){var i=null,n=null;try{var t=t||"default";i=io.connect("http://"+e,{"force new connection":!0}),n=i.socket,n.on("connect",function(){i.emit("ready",t)}),n.on("connect_failed",function(){}),n.on("error",function(){})}catch(s){}return i},generateTile:function(t,i,n){var s=t.contentModel||nio.models.Post,a=new s(n);return a.set("seconds_ago",moment().diff(a.get("time")),"seconds"),i=i||{},e.extend(i,{content:a}),new nio.views.Tile({model:new nio.models.Tile(i)})},checkPriority:function(e,t,i){return i?e>=t||0>=e:t>=e},typesContains:function(e,t,i){return 0==e.length?1==i:jQuery.inArray(t,e)>=0},getTileDurations:function(e,t){var i=0,n=e.get("maxDuration");return i="new"==t?e.get("minNewDuration"):"vip"==t?0:e.get("minOldDuration"),[i,n]},findAvailableTile:function(e,t){for(var i=[],n={afterMax:-1,minMaxPct:0},s=0;s<e.length;s++){var a=e[s],l=a.model,o=a.$el,r=o.hasClass("locked-click")||o.hasClass("locked-mouse")||o.hasClass("flipped")||o.hasClass("tile-full");o.find(".blank").length&&(r=!1);var c=nio.utils.getCurrentTime()-l.get("time"),d=nio.utils.getTileDurations(l,t.get("flag")),m=c-d[0],p=c-d[1],h=m/(m-p),u=function(){i=[a],n={afterMax:p,minMaxPct:h}};if(l.get("content").get("id")==t.get("id"))return l.get("content").get("id_value")==t.get("id_value")||r?!1:a;if(!r&&nio.utils.checkPriority(l.get("minPriority"),t.get("priority"),!1)&&nio.utils.checkPriority(l.get("maxPriority"),t.get("priority"),!0)&&nio.utils.typesContains(l.get("availableTypes"),t.get("type"),!0)&&!(nio.utils.typesContains(l.get("excludedTypes"),t.get("type"),!1)||0>m))if(n.afterMax>0)p>n.afterMax?u():p==n.afterMax&&i.push(a);else if(p>0)u();else if(0!=i.length){var h=m/(m-p),f=n.minMaxPct;h>f?u():h==f&&i.push(a)}else u()}return 0==i.length?!1:i[Math.floor(Math.random()*i.length)]},handleTileContent:function(e,t,i){var n=new i(t),s=nio.utils.findAvailableTile(e,n);if(s){var a=s.model;return a.set({time:nio.utils.getCurrentTime(),content:n}),s}},isMobileBrowser:function(){var e=!1(function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)})(navigator.userAgent||navigator.vendor||window.opera);return e}}},{}],6:[function(){nio.views.LookBack=Backbone.View.extend({initialize:function(e){_.bindAll(this);this.contentModel=nio.models.Post,this.initializeTiles(e)},initializeTiles:function(e){e=e||{};var t=this;numTiles=e.numTiles||16,maxDate=e.maxDate||moment().utc(),daysLookBack=e.daysLookBack||1,this.tiles=[],this.numTiles=numTiles,this.maxDate=maxDate,this.minDate=moment(maxDate).subtract("days",daysLookBack),this.xhr=this.model.fetch({data:{limit:this.numTiles,minDate:this.minDate.format("YYYY-MM-DD HH:mm:ss"),maxDate:this.maxDate.format("YYYY-MM-DD HH:mm:ss"),order:"random"}}),this.xhr.done(t.populateTiles)},populateTiles:function(e){var t=this;jQuery(".body",this.$el).html("");var i=e.posts;return 0==i.length?void $(".body",this.$el).append(['<div class="no-results">',"    No results found","</div>"].join("\n")):void _.each(i,function(e){var i=nio.utils.generateTile(this,{},e);$(".body",t.$el).append(i.el)})}})},{}],7:[function(){nio.views.RandomStream=nio.views.Stream.extend({handlePost:function(e){if(!(0!==this.names.length&&-1==_.indexOf(this.names,e.name)||0!==this.types.length&&-1==_.indexOf(this.types,e.type))){var t=nio.utils.handleTileContent(this.tiles,e,nio.models.Post);t&&t.on("filterByUser",this.filterByUser)}},initializeTiles:function(e){var t=this;if(this.types.length||this.names.length){var i=this.fetchTiles(e);i.done(function(){t.setupSocket()})}else{for(var n=this.getNumRows(),s=this.getNumCols(),a=0;n>a;a++)for(var l=0;s>l;l++){var o={excludedTypes:["stat-count","stat-time","stat-percent"]};a>=8?(o.minPriority=1,o.maxPriority=2):(o.minPriority=5-Math.ceil(a/2),o.maxPriority=5-Math.floor(a/2));var r=nio.utils.generateTile(this,o,{});this.$el.append(r.el),this.tiles.push(r)}this.setupSocket()}}})},{}],8:[function(){nio.views.SearchStream=nio.views.Stream.extend({handlePost:function(e){var t=moment(e.time);if(!(0!==this.names.length&&-1==_.indexOf(this.names,e.name)||0!==this.types.length&&-1==_.indexOf(this.types,e.type)||"new"!=e.flag))if(t.isSame(this.latestTime));else if(t.isAfter(this.latestTime)){this.tileCount++,this.latestTime=t;var i=nio.utils.generateTile(this,{},e);this.tiles.push(i),this.$el.prepend(i.el)}},initializeTiles:function(e){var t=this,i=this.fetchTiles(e);i.done(function(){t.setupSocket(),t.interval=setInterval(function(){_.each(t.tiles,function(e){var t=e.model.get("content");t.set("seconds_ago",moment().diff(moment(t.get("time")),"seconds")),e.model.trigger("change:content")})},1e3)})}})},{}],9:[function(){nio.views.Stream=Backbone.View.extend({initialize:function(e){_.bindAll(this),this.types=[],this.names=[],this.socketHost=e.socketHost,this.serviceHost=e.serviceHost,this.model=new nio.models.PostDictionary(this.serviceHost),this.contentModel=nio.models.Post,this.renderTiles(e)},renderTiles:function(e){e=e||{},e.types=e.types||this.types||[],e.names=e.names||this.names||[],this.types=_.compact(e.types),this.names=_.compact(e.names),this.latestTime=moment(0),this.tileCount=0,this.$el.html(""),this.tiles=[],this.tileCount=this.getNumRows()*this.getNumCols(),this.initializeTiles(e)},setupSocket:function(){this.ws||(this.ws=nio.utils.connectToWebSocket(this.socketHost,"default")),this.ws.on("recvData",this.handleMsg),this.ws.socket.on("error",this.showFetchError),this.ws.socket.on("connect_failed",this.showFetchError)},killEvents:function(){window.clearInterval(this.interval),this.ws.removeAllListeners("recvData")},getNumRows:function(){return 5},getNumCols:function(){return 3},fetchTiles:function(e){return e.names=e.names.join(","),e.types=e.types.join(","),this.postXHR&&this.postXHR.abort(),this.postXHR=this.model.fetch({data:_.extend(e,{limit:this.tileCount})}),this.postXHR.done(this.populateSearchTiles).fail(this.showFetchError),this.postXHR},showFetchError:function(){this.$el.html(['<div class="fetch-error">','    <div class="text">Oops!  Something broke.</div>',"    <div class=\"subtext\">Don't worry, we're on it.  Please refresh the page in a few minutes.</div>","</div>"].join("\n"))},populateSearchTiles:function(e){var t=this,i=_.sortBy(e.posts,function(e){return parseFloat(moment(e.time).format("X.SSS"))});0===i.length&&this.$el.html(['<div class="no-results">','    <div class="text">No results found.</div>','    <div class="subtext">Please try a different filter.</div>',"</div>"].join("\n")),_.each(i,function(e){var i=nio.utils.generateTile(t,{},e),n=i.model.get("content"),s=moment(n.get("time"));s.isAfter(t.latestTime)&&(t.latestTime=s),i.on("filterByUser",t.filterByUser),t.$el.prepend(i.el),t.tiles.push(i)})},jumpToTiles:function(){var e=$("#sidebar").offset().top-$("#main-header").height();$("html, body").animate({scrollTop:e},1e3)},filterByUser:function(e){this.trigger("filterByUser",e),this.renderTiles(e),this.jumpToTiles()},handleMsg:function(e){oMsg=$.parseJSON(e),oMsg.time=oMsg.time+" UTC",this.handlePost(oMsg)}})},{}],10:[function(){nio.views.Tile=Backbone.View.extend({tagName:"div",className:function(){return"tile tile-"+this.model.get("content").get("type")},id:function(){return"tile-"+this.model.cid},initialize:function(){_.bindAll(this);var e=this;this.$el.addClass("h"+this.model.get("rows")).addClass("w"+this.model.get("cols")),this.content=this.model.get("content"),this.model.set("contentId",this.content.get("id")),this.render(),this.model.on("change:content",function(){e.render()})},events:{mouseenter:"lockTile",mouseleave:"unlockTile",touchend:"unlockTile","click .originator-link":"filterByUser","click .pinned":"togglePin","click .close-tile":"closeTile","click .full-text, .full-image":"openContent","click a":"killFunc",click:"expandTile"},filterByUser:function(e){var t=$(e.currentTarget).parent(),i=t.attr("title");this.trigger("filterByUser",{names:[i]}),e.stopPropagation()},render:function(){var e=this,t=this.model.get("content"),i=t.get("type");if(i in compiledTemplates||(i="blank"),this.model.get("contentId")===t.get("id"))this.$el.html(this.getTileContainer(i,t)).attr("data-timestamp",moment(this.model.get("content").get("time")).format("X.SSS"));else{var n=this.$el.find("div").first(),s=this.getTileContainer(i,t).css("display","none");this.$el.prepend(s),this.model.set("contentId",t.get("id"));var a=moment(e.model.get("content").get("time")).format("X.SSS");this.$el.attr("data-timestamp",a),n.fadeOut("slow",function(){n.remove()}),s.fadeIn("slow")}},getTileContainer:function(e,t){return $("<div/>").addClass("tile-container").addClass(e).html(compiledTemplates.tile(t.toJSON()))},killFunc:function(e){e.stopPropagation()},openContent:function(e){e.preventDefault(),e.stopPropagation(),this.$el.hasClass("tile-full")&&window.open(this.$el.find("a.post-link").attr("href"))},closeTile:function(e){e.preventDefault(),e.stopPropagation(),this.$el.removeClass("tile-full",300,function(){var e=$(this).find(".youtube-player");if(e){var t=e.attr("id");e.after('<div class="youtube-player" id="'+t+'"></div>'),e.remove(),$(this).find(".video-cover-image").show()}$(this).closest(".js-packery").data("packery").layout()})},togglePin:function(e){this.$el.toggleClass("locked-click"),e.preventDefault(),e.stopPropagation()},expandTile:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),!this.$el.find(".blank").length)if(this.$el.hasClass("tile-full"))this.closeTile(e);else{this.$el.addClass("tile-full",300,function(){t.$el.closest(".js-packery").data("packery").fit(t.$el.get(0))});var i=$(this).find(".youtube-player");i&&(this.launchPlayer(this.$el.find(".youtube-player")),this.$el.find(".video-cover-image").hide())}},launchPlayer:function(e){{var t=e.attr("id");new YT.Player(t,{height:"100%",width:"100%",videoId:t,events:{onReady:function(e){nio.utils.isMobileBrowser()||e.target.playVideo()}}})}},lockTile:function(){this.$el.addClass("locked-mouse")},unlockTile:function(){this.$el.removeClass("locked-mouse")}})},{}]},{},[2]);