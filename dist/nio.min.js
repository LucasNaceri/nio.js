var htmlTemplates=htmlTemplates||{};htmlTemplates["tiles/tiles.html"]='<div id="<%=id%>" class="tile tile--<%=type%><% if (media_url) { %> has-media<% } %><% if (profile_image_url) { %> has-profile-image<% } %>">\n	<header class=tile-header>\n		<a class="tile-author u-block" href=#<%=id%>>\n			<% if (profile_image_url) { %>\n				<img class=tile-author-avatar src="<%=profile_image_url%><% if (type === \'facebook\') { %>?type=normal<% } %>" alt="<%=name%>\'s avatar">\n			<% } %>\n			<strong class="tile-author-name u-textTruncate"><%=name%></strong>\n			<time is=relative-time datetime="<%=time%>"><%=time%></time>\n		</a>\n		<span class="icon icon-<%=type%>"></span>\n	</header>\n	<div class=tile-content>\n		<% if (media_url) { %>\n			<img class=tile-media src="<%=media_url%>" alt="<%=text%>" title="<%=text%>">\n			<div class="tile-text u-marquee">\n				<div>\n					<span><%=linkify(text)%></span>\n					<span><%=linkify(text)%></span>\n				</div>\n			</div>\n		<% } else { %>\n			<div class=tile-text>\n				<% if (type === \'rss\') { %>\n					<p><strong class=font-header><%=text%></strong>\n					<%=linkify(alt_text)%>\n				<% } else { %>\n					<p><%=linkify(text)%>\n				<% } %>\n				<p class="on-expand u-muted">\n					<time is=local-time datetime="<%=time%>"><%=time%></time>\n			</div>\n		<% } %>\n	</div>\n	<footer class=tile-footer>\n		<a class="block u-pullLeft" href="<%=link%>" target=_blank>\n			View on <%=mediaTypeName(type)%>\n			<span class="icon icon-external icon-mini"></span>\n		</a>\n		<a class="block u-pullRight" href=#>\n			Share\n			<span class="icon icon-share icon-mini"></span>\n		</a>\n	</footer>\n</div>\n',function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){function i(){}function r(t){return function(){this[t]?this[t].apply(this,arguments):this.emit("error",new Error(t+" has not been implemented"))}}function a(){i.call(this)}function s(t){a.call(this),this._write=t}function o(t){a.call(this),this._write=t}function l(){a.call(this)}function u(t,e){l.call(this),this.host=t,this.interval=null,this.lastPath=null,this.pollRate=e||2e4}function c(t){l.call(this),this.ws=null,this.host=t}function h(t,e){this.msg=t||"Hello world",this.rate=e||1e3,this.interval=null}n.passthrough=function(t){return new o(t)},n.readable=function(t){return new a(t)},n.transform=function(t){return new s(t)},n.socketio=function(t){return new c(t)},n.json=function(t,e){return new u(t,e)},n.generate=function(t,e){return new h(t,e)},i.prototype=Object.create(Object.prototype,{on:{value:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)}},off:{value:function(t,e){this._events=this._events||{},t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(e),1)}},emit:{value:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=Array.prototype.slice.call(arguments,1),n=0,i=this._events[t].length;i>n;n++)this._events[t][n].apply(this,e)}}}),n.mustImplement=r,a.prototype=Object.create(i.prototype,{push:{value:function(t){t&&this.emit("data",t)}},pipe:{value:function(t){return this.on("data",t.write.bind(t)),t}},split:{value:function(){for(var t=_.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),e=t.length;e--;)this.pipe(t[e]);return this}},pull:{value:function(){for(var t=_.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),e=t.length;e--;)t[e].pipe(this);return this}}}),n.Readable=a,s.prototype=Object.create(a.prototype,{write:{value:r("_write")}}),n.Transform=s,o.prototype=Object.create(a.prototype,{write:{value:function(t){this.push(t),this._write&&this._write(t)}}}),n.PassThrough=o,l.prototype=Object.create(a.prototype,{start:{value:r},pause:{value:r},resume:{value:r}}),n.Source=l,u.prototype=Object.create(l.prototype,{start:{value:function(t){return this.fetch(t),this.interval=setInterval(function(){return this.fetch(t)}.bind(this),this.pollRate),this}},fetch:{value:function(t){return this.lastPath=t,d3.json(this.host+"/"+t,function(t,e){this.push(e)}.bind(this)),this}},pause:{value:function(){return clearTimeout(this.interval),this}},resume:{value:function(){return this.start(this.lastPath),this}}}),n.JSONStream=u,c.prototype=Object.create(l.prototype,{start:{value:function(t){this.path=t,this.ws=io.connect(this.host);var e=this.ws.socket;return e.on("connect",function(){return this.ws.emit("ready",t)}.bind(this)),e.on("connect_failed",function(){console.error("connection failed")}),e.on("error",function(){console.error("connection error")}),this.resume(),this}},pause:{value:function(){return this.ws.on("recvData",function(){return null}),this}},resume:{value:function(){return this.ws.on("recvData",function(t){return this.push(JSON.parse(t))}.bind(this)),this}}}),n.SocketIOStream=c,h.prototype=Object.create(l.prototype,{start:{value:function(){return this.interval=setInterval(function(){this.push(_.isFunction(this.msg)?this.msg():this.msg)}.bind(this),this.rate),this}},pause:{value:function(){return clearInterval(this.interval),this}},resume:{value:function(){return this.start()}}}),n.GeneratorStream=h},{}],2:[function(t){var e=window.nio=t("./core");e.utils=t("./utils"),e.collect=function(t){var n=t.transforms||[],i=t.size||9,r=t.max||i,a=t.min||0,s=t.dupes||!1;s&&(_.isString(s)?s=function(e){return e[t.dupes]}:_.isBoolean(s)&&(s=function(t){return t}));var o=t.sortDesc||!0,l=t.sort||!1;l&&(_.isString(l)?l=function(e){return e[t.sort]}:_.isBoolean(l)&&(l=function(t){return t}));var u=[],c=e.transform(function(t){if(s){var e=s(t),i=function(t){return e===s(t)};if(_.any(u,i))return}u.push(t);for(var c=0,h=n.length;h>c;c++)u=n[c](u);l&&(u=_.sortBy(u,l),o&&(u=u.reverse())),r&&u.length>r&&(u=u.slice(0,r)),a&&u.length<a||this.push(u)});return c.sort=function(t){return t?(l=t,this):l},c.size=function(t){return t?(i=a=r=t,this):i},c},e.pick=function(t){return e.transform(function(e){if(t in e){var n=e[t];if(_.isArray(n))for(var i=n.length;i--;)this.push(n[i]);else this.push(n)}})},e.defaults=function(t){return e.transform(function(e){this.push(_.defaults(e,t))})},e.log=function(t){return e.passthrough(function(e){t?console.log(t,e):console.log(e)})},e.join=function(){for(var t=new e.PassThrough,n=[].slice.call(arguments),i=n.length;i--;)n[i].pipe(t);return t},e.filter=function(t){return e.transform(function(e){t(e)&&this.push(e)})},e.map=function(t){return e.transform(function(e){for(var n in t){var i=t[n];_.isFunction(i)&&(i=i(e)),e[n]=i}this.push(e)})},e.throttle=function(t){var n=_.throttle(function(t){this.push(t)},t);return e.transform(n)},e.display=function(t,n){var i=d3.select(t),r=n;return _.isString(r)&&(r=function(t){return t[n]}),e.passthrough(function(t){i.html(r?r(t):t)})},e.tiles=t("./tiles/tiles").tiles,e.graphs=t("./graphs/graphs"),e.instance=t("./instance/instance").instance},{"./core":1,"./graphs/graphs":3,"./instance/instance":6,"./tiles/tiles":8,"./utils":9}],3:[function(t,e,n){function i(t){var e="_"+t;return{get:function(){return this[e]},set:function(t){this[e]=t}}}function r(t){s.PassThrough.call(this),_.isString(t)?this.selector=t:_.assign(this,t),this.defaults&&_.defaults(this,this.defaults)}function a(t){r.call(this,t),this.data=[]}var s=t("../core"),o={render:{value:s.mustImplement},update:{value:s.mustImplement}},l=["width","height","domains","tickFormat","title","labels","points","margin"];l.forEach(function(t){o[t]=i(t)}),r.prototype=Object.create(s.PassThrough.prototype,o),a.prototype=Object.create(r.prototype,{defaults:{"static":!0,value:{margin:{top:6,right:40,bottom:20,left:0},height:200,width:600,tickFormat:function(t){return t},points:243,duration:750,rendered:!1}},render:{value:function(){function t(){return d3.svg.axis().scale(p).ticks(5).orient("right")}function e(){return d3.svg.axis().scale(h).orient("bottom")}function n(){r=new Date,h.domain([r-(l-2)*u,r-u]),O.data.forEach(function(t){t.values.push(t.latest),t.values.shift()});var t=S.selectAll(".value").data(O.data),e=t.enter().append("g").attr("class","value").attr("class","value").attr("transform",function(t){return"translate(0,"+p(t.latest.y)+")"});e.append("text").attr("x",9).attr("dy",".32em").style("fill",function(t){return k(t.id)}),e.append("line").attr("x2",6).attr("y2",0).style("stroke",function(t){return k(t.id)}).style("fill","none"),t.exit().remove(),t.select("text").text(function(t){return c(t.latest.y)}),t.transition().duration(u).ease("linear").attr("transform",function(t){return"translate(0,"+p(t.latest.y)+")"});{var i=x.selectAll(".line").data(O.data);i.enter().append("path").attr("class","line").style("opacity",0).style("stroke",function(t){return k(t.id)}).transition().ease("linear").duration(u).style("opacity",1),i.exit().remove()}i.attr("d",function(t){return f(t.values)}),x.attr("transform",null).transition().duration(u).ease("linear").attr("transform","translate("+h(r-(l-1)*u)+")").each("end",n),b.transition().duration(u).ease("linear").call(_)}this.rendered=!0;var i=this.domains,r=new Date,a=this.margin,s=this.height-a.top-a.bottom,o=this.width-a.left-a.right,l=this.points,u=this.duration,c=this.tickFormat,h=d3.time.scale().domain([r-(l-2)*u,r-u]).range([0,o]),p=d3.scale.linear().domain(i&&i.y?i.y:[0,100]).range([s,0]),f=d3.svg.line().interpolate("basis").x(function(t,e){return h(r-(l-1-e)*u)}).y(function(t){return p(t.y)}),d=d3.select(this.selector).append("svg").attr("width",o+a.left+a.right).attr("height",s+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");d.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",o-0).attr("height",s);var v=d.append("g").attr("class","y axis").attr("transform","translate("+o+",0)"),m=t().tickSize(-o,0,0).tickFormat(""),g=(v.append("g").attr("class","y grid").call(m),t());this.tickFormat&&g.tickFormat(this.tickFormat);var y=(v.append("g").attr("class","y ticks").call(g),d.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")")),_=e(),b=y.append("g").attr("class","x ticks").call(_),w=d.append("g").attr("clip-path","url(#clip)"),x=w.append("g").attr("class","lines"),k=d3.scale.category10(),S=d.append("g").attr("class","values").attr("transform","translate("+o+",0)"),A=this.labels;A&&A.y&&d.append("text").attr("class","y label").attr("text-anchor","end").attr("y",o-15).attr("x",-6).attr("dy",".75em").attr("transform","rotate(-90)").text(A.y),A&&A.x&&d.append("text").attr("class","x label").attr("text-anchor","end").attr("y",s-15).attr("x",25).text(A.x);var O=this;return n(),this}},write:{value:function(t){if(this.rendered||this.render(),!_.any(this.data,function(e){return e.id===t.id})){console.log("new series:",t.id);var e=d3.range(this.points).map(function(){return{x:0,y:0}});this.data.push({id:t.id,values:e,latest:t})}for(var n=this.data.length;n--;)this.data[n].id===t.id&&(this.data[n].latest=t)}}}),n.line=function(t){return new a(t)}},{"../core":1}],4:[function(t,e,n){function i(){r.Readable.call(this)}var r=t("../core");i.prototype=Object.create(r.Readable.prototype,{makeRequest:{value:function(t,e,n){var i=d3.json("http://"+this.ip+"/"+t).header("Authorization",this.authHeader);"undefined"==typeof e&&(e="GET"),i.send(e,n,function(t,e){this.push(e)}.bind(this))}},setInstance:{value:function(t,e){this.ip=t,this.authHeader=e}},getChild:{value:function(t){var e=new t;return e.setInstance(this.ip,this.authHeader),e}}}),n.API=i},{"../core":1}],5:[function(t,e,n){function i(){r.API.call(this)}var r=t("./api");n.Updater=i,i.prototype=Object.create(r.API.prototype,{})},{"./api":4}],6:[function(t,e,n){function i(){r.API.call(this)}var r=t("./api"),a=t("./service"),s=t("./block");n.instance=function(t,e){var n="Basic "+btoa(e.user+":"+e.pass),r=new i;return r.setInstance(t,n),r},i.prototype=Object.create(r.API.prototype,{service:{value:function(t){var e=this.getChild(a.Service);return e.makeRequest("services/"+t),e}},services:{value:function(){var t=this.getChild(a.Collection);return t.makeRequest("services"),t}},serviceStatus:{value:function(t,e){var n=this.getChild(a.Status);return n.makeRequest("services/"+t+"/"+e),n}},blockUpdate:{value:function(t,e){var n=this.getChild(s.Updater);return n.makeRequest("blocks/"+t,"PUT",JSON.stringify(e)),n}}})},{"./api":4,"./block":5,"./service":7}],7:[function(t,e,n){function i(){s.API.call(this)}function r(){s.API.call(this)}function a(){s.API.call(this)}var s=t("./api");n.Service=i,n.Collection=r,n.Status=a,i.prototype=Object.create(s.API.prototype,{}),r.prototype=Object.create(s.API.prototype,{}),a.prototype=Object.create(s.API.prototype,{})},{"./api":4}],8:[function(t,e,n){var i=(t("../core"),_.template(htmlTemplates["tiles/tiles.html"],null,{imports:t("../utils")}));n.tiles=function(t){function e(t){l=l.data(t,o);var e=(l.order(),l.enter().append("div").attr("class","tile-wrapper").html(s).on("click",function(){var t=d3.select(this).select(".tile"),e=t.classed("is-expanded");e||a.selectAll(".tile").classed("is-expanded",!1),t.classed("is-expanded",!e)}).select(".tile").classed("flip-in",!0)),n=l.exit();r?(e.style("opacity",0).transition().duration(r).style("opacity",1),n.transition().duration(r).style("opacity",0).remove()):n.remove()}var n=_.isPlainObject(t)?t.selector:t,r=(t.numCols||3,t.hasOwnProperty("animSpeed")?t.animSpeed:0),a=d3.select(n),s=function(t){return i(t)},o=function(t){return t?t.id:console.log(t)},l=a.selectAll(".tile-wrapper");return nio.passthrough(e)}},{"../core":1,"../utils":9}],9:[function(t,e,n){n.linkify=function(t){return t=t.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target=_blank href='$1'>$1</a>"),t=t.replace(/(^|\s)@(\w+)/g,'$1<a target=_blank href="http://twitter.com/$2">@$2</a>'),t.replace(/(^|\s)#(\w+)/g,'$1<a target=_blank href="http://twitter.com/search?q=%23$2">#$2</a>')},n.truncate=function(t,e){return t.length>e?t.substring(0,e-3)+"...":t},n.isArray=_.isArray,n.isFunc=_.isFunction,n.isStr=_.isString;var i={twitter:"Twitter","twitter-photo":"Twitter",facebook:"Facebook",gplus:"Google+",linkedin:"LinkedIn",rss:"RSS"};n.mediaTypeName=function(t){return t in i?i[t]:t}},{}]},{},[2]);